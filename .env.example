# LOs Generation Pipeline - Environment Variables Template
# Copy this file to .env and fill in your actual values

# ===========================================
# APPLICATION SETTINGS
# ===========================================
SECRET_KEY=your-secret-key-here-change-this-in-production
ENVIRONMENT=development
DEBUG=true

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
DATABASE_URL=postgresql+asyncpg://los_user:los_password@localhost:5432/los_generation
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# ===========================================
# REDIS CONFIGURATION
# ===========================================
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=10

# ===========================================
# VECTOR DATABASE (QDRANT)
# ===========================================
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION_NAME=los_chunks
VECTOR_DIMENSION=1024

# ===========================================
# AI/LLM API CONFIGURATION
# ===========================================
# REQUIRED: Get your API key from Google AI Studio
GEMINI_API_KEY=your-gemini-api-key-here

# OpenAI (optional - for alternative LO generation)
OPENAI_API_KEY=your-openai-api-key-here

# Hugging Face (for BGE-M3 embeddings)
HUGGINGFACE_API_KEY=your-hf-api-key-here

# Ollama for local embeddings
OLLAMA_URL=http://localhost:11434

# ===========================================
# LANGFUSE OBSERVABILITY (REQUIRED FOR MVP)
# ===========================================
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key
LANGFUSE_SECRET_KEY=sk-lf-your-secret-key
LANGFUSE_HOST=https://cloud.langfuse.com

# ===========================================
# RATE LIMITING & SECURITY
# ===========================================
DEFAULT_RATE_LIMIT=100
RATE_LIMIT_PERIOD=3600

# API Security
API_RATE_LIMIT_PER_MINUTE=60
API_RATE_LIMIT_PER_HOUR=1000
API_KEY_EXPIRY_DAYS=365

# ===========================================
# PROCESSING CONFIGURATION
# ===========================================
MAX_CONCURRENT_JOBS=5
CHUNK_SIZE=1000
OVERLAP_SIZE=200
MAX_RETRIEVAL_CHUNKS=20
TOP_K_RETRIEVAL=10

# ===========================================
# OCR CONFIGURATION (HYBRID CHUNKING)
# ===========================================
# Tesseract OCR settings
TESSERACT_PATH=/usr/bin/tesseract
TESSERACT_DATA_PATH=/usr/share/tesseract-ocr/4.00/tessdata
OCR_LANGUAGES=eng,tha
OCR_CONFIDENCE_THRESHOLD=60
OCR_ENABLE_PREPROCESSING=true
OCR_MAX_CONCURRENT_PAGES=3
OCR_PROCESSING_TIMEOUT=180

# OCR temporary directory
OCR_TEMP_DIR=/tmp/ocr
OCR_CLEANUP_TEMP_FILES=true

# Image processing settings
PDF_TO_IMAGE_DPI=300
PDF_TO_IMAGE_FORMAT=PNG
OCR_MAX_IMAGE_SIZE_MB=50

# ===========================================
# HYBRID CHUNKING CONFIGURATION
# ===========================================
# Structural chunking (for native PDFs)
PARENT_CHUNK_SIZE=1000
CHILD_CHUNK_SIZE=300
CHUNK_OVERLAP=50

# Agentic chunking (for scanned PDFs)
AGENTIC_TARGET_PARENT_CHUNK_SIZE=500
AGENTIC_MAX_PARENT_CHUNK_SIZE=800
AGENTIC_MIN_PARENT_CHUNK_SIZE=200
AGENTIC_MAX_CHILD_CHUNKS_PER_PARENT=10
AGENTIC_MIN_CHUNK_CONFIDENCE=0.75
AGENTIC_COVERAGE_THRESHOLD=0.85
AGENTIC_MAX_RETRIES=3
AGENTIC_TIMEOUT_SECONDS=120

# Document analysis settings
DOC_ANALYSIS_MAX_PAGES=5
DOC_ANALYSIS_NATIVE_THRESHOLD=0.8
DOC_ANALYSIS_MIXED_THRESHOLD=0.3
DOC_ANALYSIS_MIN_TEXT_LENGTH=50

# ===========================================
# MODEL CONFIGURATION
# ===========================================
DEFAULT_EMBEDDING_MODEL=bge-m3
ENGLISH_EMBEDDING_MODEL=dengcao/Qwen3-Embedding-0.6B:F16
THAI_RERANKER_MODEL=bge-reranker-v2-m3
ENGLISH_RERANKER_MODEL=dengcao/Qwen3-Reranker-0.6B:F16

# ===========================================
# DIRECTORY PATHS
# ===========================================
CONFIG_DIR=configs
INPUT_DATA_DIR=input_data
OUTPUT_DATA_DIR=output_data
UPLOAD_DIR=uploads
PROCESSED_DIR=processed
LOGS_DIR=logs

# File size limits (in MB)
MAX_PDF_SIZE_MB=100
MAX_UPLOAD_SIZE_MB=200

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_TO_FILE=true
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=5

# ===========================================
# MONITORING & COST TRACKING
# ===========================================
# Cost tracking
MONTHLY_BUDGET_ALERT_USD=100
COST_PER_1K_TOKENS=0.002

# Performance monitoring
LOG_SLOW_PAGES_THRESHOLD_SECONDS=60
ALERT_ON_LOW_CONFIDENCE_RATIO=0.3
TRACK_PROCESSING_TIMES=true
TRACK_OCR_METRICS=true
TRACK_CHUNK_QUALITY_SCORES=true

# Quality monitoring
MIN_ACCEPTABLE_QUALITY=0.6
ALERT_ON_QUALITY_DEGRADATION=true

# ===========================================
# PRODUCTION SECURITY (SET IN PRODUCTION)
# ===========================================
# FORCE_HTTPS=true
# SSL_CERT_PATH=/etc/ssl/certs/fullchain.pem
# SSL_KEY_PATH=/etc/ssl/certs/privkey.pem
# ALLOWED_HOSTS=yourdomain.com,api.yourdomain.com
# CORS_ORIGINS=https://yourdomain.com